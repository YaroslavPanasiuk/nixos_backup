{"version":3,"file":"content.bundle.js","mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;ACxEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AASA;AAAA;AARA;AAIA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAKA;AAEA;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAKA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AAIA;AAEA;AAIA;AAGA;AAIA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAGA;AACA;AACA;;AAEA;AACA;AAIA;AACA;;AAEA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AAIA;AAIA;AAKA;AACA;AAIA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACA;AACA;;;;;AC3XA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAMA;AACA;AACA;AAEA;AAKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAMA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AASA;AACA;AACA;AACA;AAMA;AAIA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAGA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AA/TA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AAKA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AAIA;AAEA;AACA;AACA;AAEA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AChJA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAGA;AACA;;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AAEA;AAKA;AACA;AAEA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;ACzIA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AAGA;AAIA;AAEA;AACA;AACA;AAIA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AACA;;AAIA;AACA;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC5IA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAiDA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAMA;AACA;AACA;AAKA;;AAEA;AACA;AACA;AAKA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAEA;;;;;;AC/GA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;;AAEA;;AAgGA;AACA;AACA;AAEA;AACA;AACA;AAKA;AAEA;AACA;AACA;AACA;AAEA;AAIA;AAGA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AAEA;AAGA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAEA;AACA;AACA;;AAEA;AAIA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAIA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AAIA;AACA;AACA;AAEA;AACA;AAKA;AACA;AACA;AAEA;AACA;AAKA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AA9SA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AC1GA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AAIA;AAEA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxIA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAUA;AACA;AACA;AAEA;AACA;AAEA;AAIA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AA9DA;AACA;AAAA;AAGA;AACA;;;;;ACpBA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAEA;AAMA;AACA;AACA;AAAA;AAGA;AACA;AAAA;AAXA;AACA;AACA;AAWA;AACA;AACA;AAEA;AACA;AACA;AAKA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;;AC5BA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAOA;AAEA;AAEA;AAIA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://language-settings-manager/./node_modules/serialize-error/index.js","webpack://language-settings-manager/./node_modules/webextension-polyfill/dist/browser-polyfill.js","webpack://language-settings-manager/webpack/bootstrap","webpack://language-settings-manager/webpack/runtime/compat get default export","webpack://language-settings-manager/webpack/runtime/define property getters","webpack://language-settings-manager/webpack/runtime/global","webpack://language-settings-manager/webpack/runtime/hasOwnProperty shorthand","webpack://language-settings-manager/webpack/runtime/publicPath","webpack://language-settings-manager/./src/js/util.js","webpack://language-settings-manager/./src/js/content/default.js","webpack://language-settings-manager/./src/js/content/facebook.js","webpack://language-settings-manager/./node_modules/uuid/dist/esm-browser/rng.js","webpack://language-settings-manager/./node_modules/uuid/dist/esm-browser/regex.js","webpack://language-settings-manager/./node_modules/uuid/dist/esm-browser/validate.js","webpack://language-settings-manager/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://language-settings-manager/./node_modules/uuid/dist/esm-browser/v4.js","webpack://language-settings-manager/./src/js/networking.js","webpack://language-settings-manager/./src/js/achievements.js","webpack://language-settings-manager/./src/js/content/google-search.js","webpack://language-settings-manager/./src/js/content/wikipedia.js","webpack://language-settings-manager/./src/js/content/linkedin.js","webpack://language-settings-manager/./src/js/content/shared/google-ui-languages.js","webpack://language-settings-manager/./src/js/content/youtube.js","webpack://language-settings-manager/./src/js/content/google-myaccount.js","webpack://language-settings-manager/./src/js/routing.js","webpack://language-settings-manager/./src/js/content.js"],"sourcesContent":["'use strict';\n\nclass NonError extends Error {\n\tconstructor(message) {\n\t\tsuper(NonError._prepareSuperMessage(message));\n\t\tObject.defineProperty(this, 'name', {\n\t\t\tvalue: 'NonError',\n\t\t\tconfigurable: true,\n\t\t\twritable: true\n\t\t});\n\n\t\tif (Error.captureStackTrace) {\n\t\t\tError.captureStackTrace(this, NonError);\n\t\t}\n\t}\n\n\tstatic _prepareSuperMessage(message) {\n\t\ttry {\n\t\t\treturn JSON.stringify(message);\n\t\t} catch (_) {\n\t\t\treturn String(message);\n\t\t}\n\t}\n}\n\nconst commonProperties = [\n\t{property: 'name', enumerable: false},\n\t{property: 'message', enumerable: false},\n\t{property: 'stack', enumerable: false},\n\t{property: 'code', enumerable: true}\n];\n\nconst destroyCircular = ({from, seen, to_, forceEnumerable}) => {\n\tconst to = to_ || (Array.isArray(from) ? [] : {});\n\n\tseen.push(from);\n\n\tfor (const [key, value] of Object.entries(from)) {\n\t\tif (typeof value === 'function') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!value || typeof value !== 'object') {\n\t\t\tto[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!seen.includes(from[key])) {\n\t\t\tto[key] = destroyCircular({from: from[key], seen: seen.slice(), forceEnumerable});\n\t\t\tcontinue;\n\t\t}\n\n\t\tto[key] = '[Circular]';\n\t}\n\n\tfor (const {property, enumerable} of commonProperties) {\n\t\tif (typeof from[property] === 'string') {\n\t\t\tObject.defineProperty(to, property, {\n\t\t\t\tvalue: from[property],\n\t\t\t\tenumerable: forceEnumerable ? true : enumerable,\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true\n\t\t\t});\n\t\t}\n\t}\n\n\treturn to;\n};\n\nconst serializeError = value => {\n\tif (typeof value === 'object' && value !== null) {\n\t\treturn destroyCircular({from: value, seen: [], forceEnumerable: true});\n\t}\n\n\t// People sometimes throw things besides Error objectsâ€¦\n\tif (typeof value === 'function') {\n\t\t// `JSON.stringify()` discards functions. We do too, unless a function is thrown directly.\n\t\treturn `[Function: ${(value.name || 'anonymous')}]`;\n\t}\n\n\treturn value;\n};\n\nconst deserializeError = value => {\n\tif (value instanceof Error) {\n\t\treturn value;\n\t}\n\n\tif (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n\t\tconst newError = new Error();\n\t\tdestroyCircular({from: value, seen: [], to_: newError});\n\t\treturn newError;\n\t}\n\n\treturn new NonError(value);\n};\n\nmodule.exports = {\n\tserializeError,\n\tdeserializeError\n};\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(\"webextension-polyfill\", [\"module\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.browser = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (module) {\n  /* webextension-polyfill - v0.7.0 - Tue Nov 10 2020 20:24:04 */\n\n  /* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n\n  /* vim: set sts=2 sw=2 et tw=80: */\n\n  /* This Source Code Form is subject to the terms of the Mozilla Public\n   * License, v. 2.0. If a copy of the MPL was not distributed with this\n   * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n  \"use strict\";\n\n  if (typeof browser === \"undefined\" || Object.getPrototypeOf(browser) !== Object.prototype) {\n    const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n    const SEND_RESPONSE_DEPRECATION_WARNING = \"Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)\"; // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n    // optimization for Firefox. Since Spidermonkey does not fully parse the\n    // contents of a function until the first time it's called, and since it will\n    // never actually need to be called, this allows the polyfill to be included\n    // in Firefox nearly for free.\n\n    const wrapAPIs = extensionAPIs => {\n      // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n      // at build time by replacing the following \"include\" with the content of the\n      // JSON file.\n      const apiMetadata = {\n        \"alarms\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"clearAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"bookmarks\": {\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getChildren\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getRecent\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getSubTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTree\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"browserAction\": {\n          \"disable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"enable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"getBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"openPopup\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"browsingData\": {\n          \"remove\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"removeCache\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCookies\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeDownloads\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFormData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeHistory\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeLocalStorage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePasswords\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePluginData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"settings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"commands\": {\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"contextMenus\": {\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"cookies\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAllCookieStores\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"devtools\": {\n          \"inspectedWindow\": {\n            \"eval\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 2,\n              \"singleCallbackArg\": false\n            }\n          },\n          \"panels\": {\n            \"create\": {\n              \"minArgs\": 3,\n              \"maxArgs\": 3,\n              \"singleCallbackArg\": true\n            },\n            \"elements\": {\n              \"createSidebarPane\": {\n                \"minArgs\": 1,\n                \"maxArgs\": 1\n              }\n            }\n          }\n        },\n        \"downloads\": {\n          \"cancel\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"download\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"erase\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFileIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"open\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"pause\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFile\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"resume\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"extension\": {\n          \"isAllowedFileSchemeAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"isAllowedIncognitoAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"history\": {\n          \"addUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"deleteRange\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getVisits\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"i18n\": {\n          \"detectLanguage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAcceptLanguages\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"identity\": {\n          \"launchWebAuthFlow\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"idle\": {\n          \"queryState\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"management\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setEnabled\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"uninstallSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"notifications\": {\n          \"clear\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPermissionLevel\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"pageAction\": {\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"hide\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"permissions\": {\n          \"contains\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"request\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"runtime\": {\n          \"getBackgroundPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPlatformInfo\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"openOptionsPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"requestUpdateCheck\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"sendMessage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 3\n          },\n          \"sendNativeMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"setUninstallURL\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"sessions\": {\n          \"getDevices\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getRecentlyClosed\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"restore\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"storage\": {\n          \"local\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          },\n          \"managed\": {\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            }\n          },\n          \"sync\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        },\n        \"tabs\": {\n          \"captureVisibleTab\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"detectLanguage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"discard\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"duplicate\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"executeScript\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getZoom\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getZoomSettings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goBack\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goForward\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"highlight\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"insertCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"query\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"reload\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"sendMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 3\n          },\n          \"setZoom\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"setZoomSettings\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"update\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          }\n        },\n        \"topSites\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"webNavigation\": {\n          \"getAllFrames\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFrame\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"webRequest\": {\n          \"handlerBehaviorChanged\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"windows\": {\n          \"create\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getLastFocused\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        }\n      };\n\n      if (Object.keys(apiMetadata).length === 0) {\n        throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n      }\n      /**\n       * A WeakMap subclass which creates and stores a value for any key which does\n       * not exist when accessed, but behaves exactly as an ordinary WeakMap\n       * otherwise.\n       *\n       * @param {function} createItem\n       *        A function which will be called in order to create the value for any\n       *        key which does not exist, the first time it is accessed. The\n       *        function receives, as its only argument, the key being created.\n       */\n\n\n      class DefaultWeakMap extends WeakMap {\n        constructor(createItem, items = undefined) {\n          super(items);\n          this.createItem = createItem;\n        }\n\n        get(key) {\n          if (!this.has(key)) {\n            this.set(key, this.createItem(key));\n          }\n\n          return super.get(key);\n        }\n\n      }\n      /**\n       * Returns true if the given object is an object with a `then` method, and can\n       * therefore be assumed to behave as a Promise.\n       *\n       * @param {*} value The value to test.\n       * @returns {boolean} True if the value is thenable.\n       */\n\n\n      const isThenable = value => {\n        return value && typeof value === \"object\" && typeof value.then === \"function\";\n      };\n      /**\n       * Creates and returns a function which, when called, will resolve or reject\n       * the given promise based on how it is called:\n       *\n       * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n       *   the promise is rejected with that value.\n       * - If the function is called with exactly one argument, the promise is\n       *   resolved to that value.\n       * - Otherwise, the promise is resolved to an array containing all of the\n       *   function's arguments.\n       *\n       * @param {object} promise\n       *        An object containing the resolution and rejection functions of a\n       *        promise.\n       * @param {function} promise.resolve\n       *        The promise's resolution function.\n       * @param {function} promise.rejection\n       *        The promise's rejection function.\n       * @param {object} metadata\n       *        Metadata about the wrapped method which has created the callback.\n       * @param {integer} metadata.maxResolvedArgs\n       *        The maximum number of arguments which may be passed to the\n       *        callback created by the wrapped async function.\n       *\n       * @returns {function}\n       *        The generated callback function.\n       */\n\n\n      const makeCallback = (promise, metadata) => {\n        return (...callbackArgs) => {\n          if (extensionAPIs.runtime.lastError) {\n            promise.reject(extensionAPIs.runtime.lastError);\n          } else if (metadata.singleCallbackArg || callbackArgs.length <= 1 && metadata.singleCallbackArg !== false) {\n            promise.resolve(callbackArgs[0]);\n          } else {\n            promise.resolve(callbackArgs);\n          }\n        };\n      };\n\n      const pluralizeArguments = numArgs => numArgs == 1 ? \"argument\" : \"arguments\";\n      /**\n       * Creates a wrapper function for a method with the given name and metadata.\n       *\n       * @param {string} name\n       *        The name of the method which is being wrapped.\n       * @param {object} metadata\n       *        Metadata about the method being wrapped.\n       * @param {integer} metadata.minArgs\n       *        The minimum number of arguments which must be passed to the\n       *        function. If called with fewer than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {integer} metadata.maxArgs\n       *        The maximum number of arguments which may be passed to the\n       *        function. If called with more than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {integer} metadata.maxResolvedArgs\n       *        The maximum number of arguments which may be passed to the\n       *        callback created by the wrapped async function.\n       *\n       * @returns {function(object, ...*)}\n       *       The generated wrapper function.\n       */\n\n\n      const wrapAsyncFunction = (name, metadata) => {\n        return function asyncFunctionWrapper(target, ...args) {\n          if (args.length < metadata.minArgs) {\n            throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n          }\n\n          if (args.length > metadata.maxArgs) {\n            throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n          }\n\n          return new Promise((resolve, reject) => {\n            if (metadata.fallbackToNoCallback) {\n              // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n              // and so the polyfill will try to call it with a callback first, and it will fallback\n              // to not passing the callback if the first call fails.\n              try {\n                target[name](...args, makeCallback({\n                  resolve,\n                  reject\n                }, metadata));\n              } catch (cbError) {\n                console.warn(`${name} API method doesn't seem to support the callback parameter, ` + \"falling back to call it without a callback: \", cbError);\n                target[name](...args); // Update the API method metadata, so that the next API calls will not try to\n                // use the unsupported callback anymore.\n\n                metadata.fallbackToNoCallback = false;\n                metadata.noCallback = true;\n                resolve();\n              }\n            } else if (metadata.noCallback) {\n              target[name](...args);\n              resolve();\n            } else {\n              target[name](...args, makeCallback({\n                resolve,\n                reject\n              }, metadata));\n            }\n          });\n        };\n      };\n      /**\n       * Wraps an existing method of the target object, so that calls to it are\n       * intercepted by the given wrapper function. The wrapper function receives,\n       * as its first argument, the original `target` object, followed by each of\n       * the arguments passed to the original method.\n       *\n       * @param {object} target\n       *        The original target object that the wrapped method belongs to.\n       * @param {function} method\n       *        The method being wrapped. This is used as the target of the Proxy\n       *        object which is created to wrap the method.\n       * @param {function} wrapper\n       *        The wrapper function which is called in place of a direct invocation\n       *        of the wrapped method.\n       *\n       * @returns {Proxy<function>}\n       *        A Proxy object for the given method, which invokes the given wrapper\n       *        method in its place.\n       */\n\n\n      const wrapMethod = (target, method, wrapper) => {\n        return new Proxy(method, {\n          apply(targetMethod, thisObj, args) {\n            return wrapper.call(thisObj, target, ...args);\n          }\n\n        });\n      };\n\n      let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n      /**\n       * Wraps an object in a Proxy which intercepts and wraps certain methods\n       * based on the given `wrappers` and `metadata` objects.\n       *\n       * @param {object} target\n       *        The target object to wrap.\n       *\n       * @param {object} [wrappers = {}]\n       *        An object tree containing wrapper functions for special cases. Any\n       *        function present in this object tree is called in place of the\n       *        method in the same location in the `target` object tree. These\n       *        wrapper methods are invoked as described in {@see wrapMethod}.\n       *\n       * @param {object} [metadata = {}]\n       *        An object tree containing metadata used to automatically generate\n       *        Promise-based wrapper functions for asynchronous. Any function in\n       *        the `target` object tree which has a corresponding metadata object\n       *        in the same location in the `metadata` tree is replaced with an\n       *        automatically-generated wrapper function, as described in\n       *        {@see wrapAsyncFunction}\n       *\n       * @returns {Proxy<object>}\n       */\n\n      const wrapObject = (target, wrappers = {}, metadata = {}) => {\n        let cache = Object.create(null);\n        let handlers = {\n          has(proxyTarget, prop) {\n            return prop in target || prop in cache;\n          },\n\n          get(proxyTarget, prop, receiver) {\n            if (prop in cache) {\n              return cache[prop];\n            }\n\n            if (!(prop in target)) {\n              return undefined;\n            }\n\n            let value = target[prop];\n\n            if (typeof value === \"function\") {\n              // This is a method on the underlying object. Check if we need to do\n              // any wrapping.\n              if (typeof wrappers[prop] === \"function\") {\n                // We have a special-case wrapper for this method.\n                value = wrapMethod(target, target[prop], wrappers[prop]);\n              } else if (hasOwnProperty(metadata, prop)) {\n                // This is an async method that we have metadata for. Create a\n                // Promise wrapper for it.\n                let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n                value = wrapMethod(target, target[prop], wrapper);\n              } else {\n                // This is a method that we don't know or care about. Return the\n                // original method, bound to the underlying object.\n                value = value.bind(target);\n              }\n            } else if (typeof value === \"object\" && value !== null && (hasOwnProperty(wrappers, prop) || hasOwnProperty(metadata, prop))) {\n              // This is an object that we need to do some wrapping for the children\n              // of. Create a sub-object wrapper for it with the appropriate child\n              // metadata.\n              value = wrapObject(value, wrappers[prop], metadata[prop]);\n            } else if (hasOwnProperty(metadata, \"*\")) {\n              // Wrap all properties in * namespace.\n              value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n            } else {\n              // We don't need to do any wrapping for this property,\n              // so just forward all access to the underlying object.\n              Object.defineProperty(cache, prop, {\n                configurable: true,\n                enumerable: true,\n\n                get() {\n                  return target[prop];\n                },\n\n                set(value) {\n                  target[prop] = value;\n                }\n\n              });\n              return value;\n            }\n\n            cache[prop] = value;\n            return value;\n          },\n\n          set(proxyTarget, prop, value, receiver) {\n            if (prop in cache) {\n              cache[prop] = value;\n            } else {\n              target[prop] = value;\n            }\n\n            return true;\n          },\n\n          defineProperty(proxyTarget, prop, desc) {\n            return Reflect.defineProperty(cache, prop, desc);\n          },\n\n          deleteProperty(proxyTarget, prop) {\n            return Reflect.deleteProperty(cache, prop);\n          }\n\n        }; // Per contract of the Proxy API, the \"get\" proxy handler must return the\n        // original value of the target if that value is declared read-only and\n        // non-configurable. For this reason, we create an object with the\n        // prototype set to `target` instead of using `target` directly.\n        // Otherwise we cannot return a custom object for APIs that\n        // are declared read-only and non-configurable, such as `chrome.devtools`.\n        //\n        // The proxy handlers themselves will still use the original `target`\n        // instead of the `proxyTarget`, so that the methods and properties are\n        // dereferenced via the original targets.\n\n        let proxyTarget = Object.create(target);\n        return new Proxy(proxyTarget, handlers);\n      };\n      /**\n       * Creates a set of wrapper functions for an event object, which handles\n       * wrapping of listener functions that those messages are passed.\n       *\n       * A single wrapper is created for each listener function, and stored in a\n       * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n       * retrieve the original wrapper, so that  attempts to remove a\n       * previously-added listener work as expected.\n       *\n       * @param {DefaultWeakMap<function, function>} wrapperMap\n       *        A DefaultWeakMap object which will create the appropriate wrapper\n       *        for a given listener function when one does not exist, and retrieve\n       *        an existing one when it does.\n       *\n       * @returns {object}\n       */\n\n\n      const wrapEvent = wrapperMap => ({\n        addListener(target, listener, ...args) {\n          target.addListener(wrapperMap.get(listener), ...args);\n        },\n\n        hasListener(target, listener) {\n          return target.hasListener(wrapperMap.get(listener));\n        },\n\n        removeListener(target, listener) {\n          target.removeListener(wrapperMap.get(listener));\n        }\n\n      }); // Keep track if the deprecation warning has been logged at least once.\n\n\n      let loggedSendResponseDeprecationWarning = false;\n      const onMessageWrappers = new DefaultWeakMap(listener => {\n        if (typeof listener !== \"function\") {\n          return listener;\n        }\n        /**\n         * Wraps a message listener function so that it may send responses based on\n         * its return value, rather than by returning a sentinel value and calling a\n         * callback. If the listener function returns a Promise, the response is\n         * sent when the promise either resolves or rejects.\n         *\n         * @param {*} message\n         *        The message sent by the other end of the channel.\n         * @param {object} sender\n         *        Details about the sender of the message.\n         * @param {function(*)} sendResponse\n         *        A callback which, when called with an arbitrary argument, sends\n         *        that value as a response.\n         * @returns {boolean}\n         *        True if the wrapped listener returned a Promise, which will later\n         *        yield a response. False otherwise.\n         */\n\n\n        return function onMessage(message, sender, sendResponse) {\n          let didCallSendResponse = false;\n          let wrappedSendResponse;\n          let sendResponsePromise = new Promise(resolve => {\n            wrappedSendResponse = function (response) {\n              if (!loggedSendResponseDeprecationWarning) {\n                console.warn(SEND_RESPONSE_DEPRECATION_WARNING, new Error().stack);\n                loggedSendResponseDeprecationWarning = true;\n              }\n\n              didCallSendResponse = true;\n              resolve(response);\n            };\n          });\n          let result;\n\n          try {\n            result = listener(message, sender, wrappedSendResponse);\n          } catch (err) {\n            result = Promise.reject(err);\n          }\n\n          const isResultThenable = result !== true && isThenable(result); // If the listener didn't returned true or a Promise, or called\n          // wrappedSendResponse synchronously, we can exit earlier\n          // because there will be no response sent from this listener.\n\n          if (result !== true && !isResultThenable && !didCallSendResponse) {\n            return false;\n          } // A small helper to send the message if the promise resolves\n          // and an error if the promise rejects (a wrapped sendMessage has\n          // to translate the message into a resolved promise or a rejected\n          // promise).\n\n\n          const sendPromisedResult = promise => {\n            promise.then(msg => {\n              // send the message value.\n              sendResponse(msg);\n            }, error => {\n              // Send a JSON representation of the error if the rejected value\n              // is an instance of error, or the object itself otherwise.\n              let message;\n\n              if (error && (error instanceof Error || typeof error.message === \"string\")) {\n                message = error.message;\n              } else {\n                message = \"An unexpected error occurred\";\n              }\n\n              sendResponse({\n                __mozWebExtensionPolyfillReject__: true,\n                message\n              });\n            }).catch(err => {\n              // Print an error on the console if unable to send the response.\n              console.error(\"Failed to send onMessage rejected reply\", err);\n            });\n          }; // If the listener returned a Promise, send the resolved value as a\n          // result, otherwise wait the promise related to the wrappedSendResponse\n          // callback to resolve and send it as a response.\n\n\n          if (isResultThenable) {\n            sendPromisedResult(result);\n          } else {\n            sendPromisedResult(sendResponsePromise);\n          } // Let Chrome know that the listener is replying.\n\n\n          return true;\n        };\n      });\n\n      const wrappedSendMessageCallback = ({\n        reject,\n        resolve\n      }, reply) => {\n        if (extensionAPIs.runtime.lastError) {\n          // Detect when none of the listeners replied to the sendMessage call and resolve\n          // the promise to undefined as in Firefox.\n          // See https://github.com/mozilla/webextension-polyfill/issues/130\n          if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n            resolve();\n          } else {\n            reject(extensionAPIs.runtime.lastError);\n          }\n        } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n          // Convert back the JSON representation of the error into\n          // an Error instance.\n          reject(new Error(reply.message));\n        } else {\n          resolve(reply);\n        }\n      };\n\n      const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          const wrappedCb = wrappedSendMessageCallback.bind(null, {\n            resolve,\n            reject\n          });\n          args.push(wrappedCb);\n          apiNamespaceObj.sendMessage(...args);\n        });\n      };\n\n      const staticWrappers = {\n        runtime: {\n          onMessage: wrapEvent(onMessageWrappers),\n          onMessageExternal: wrapEvent(onMessageWrappers),\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 1,\n            maxArgs: 3\n          })\n        },\n        tabs: {\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 2,\n            maxArgs: 3\n          })\n        }\n      };\n      const settingMetadata = {\n        clear: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        get: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        set: {\n          minArgs: 1,\n          maxArgs: 1\n        }\n      };\n      apiMetadata.privacy = {\n        network: {\n          \"*\": settingMetadata\n        },\n        services: {\n          \"*\": settingMetadata\n        },\n        websites: {\n          \"*\": settingMetadata\n        }\n      };\n      return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n    };\n\n    if (typeof chrome != \"object\" || !chrome || !chrome.runtime || !chrome.runtime.id) {\n      throw new Error(\"This script should only be loaded in a browser extension.\");\n    } // The build process adds a UMD wrapper around this file, which makes the\n    // `module` variable available.\n\n\n    module.exports = wrapAPIs(chrome);\n  } else {\n    module.exports = browser;\n  }\n});\n//# sourceMappingURL=browser-polyfill.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import browser from 'webextension-polyfill';\nimport { serializeError } from 'serialize-error';\nexport function getExtensionVersion() {\n  return browser.runtime.getManifest().version;\n}\n\nexport async function storageGet(key) {\n  return browser.storage.local.get(key);\n}\n\nexport async function storageSet(data) {\n  return browser.storage.local.set(data);\n}\n\nexport async function storageRemove(data) {\n  return browser.storage.local.remove(data);\n}\n\nexport async function storageGetSync(key) {\n  return browser.storage.sync.get(key);\n}\n\nexport async function storageSetSync(data) {\n  return browser.storage.sync.set(data);\n}\n\nexport function getMessage(msg) {\n  return browser.i18n.getMessage(msg);\n}\n\nexport function localizeHtmlPage() {\n  //Localize by replacing __MSG_***__ meta tags\n  var objects = document.getElementsByTagName('html');\n  for (var j = 0; j < objects.length; j++) {\n    var obj = objects[j];\n\n    var valStrH = obj.innerHTML.toString();\n    var valNewH = valStrH.replace(/__MSG_(\\w+)__/g, function (match, v1) {\n      return v1 ? getMessage(v1) : '';\n    });\n\n    if (valNewH != valStrH) {\n      obj.innerHTML = valNewH;\n    }\n  }\n}\n\nexport function reportError(desc, errorData) {\n  console.log('util.reportError()', errorData);\n\n  const strError =\n    errorData instanceof Error ? serializeError(errorData) : errorData;\n\n  return browser.runtime.sendMessage({\n    type: 'content',\n    subtype: 'MsgReportError',\n    desc: desc,\n    errorData: strError,\n  });\n}\n\n// Factory settings\nexport let FEATURES = __FEATURES__;\nexport async function updateRuntimeFeatures() {\n  return browser.storage.local.get('features').then((features) => {\n    if (features && Object.keys(features).length > 0) {\n      FEATURES = features;\n    }\n    return FEATURES;\n  });\n}\n\nupdateRuntimeFeatures();\n","import { storageGet, storageGetSync, storageSet, storageRemove } from '../util';\nimport { reportError, FEATURES } from '../util';\nimport browser from 'webextension-polyfill';\n\nconst promptsFrequency = {\n  slow: 7 * 60 * 60 * 1000,\n  gentle: 1 * 60 * 60 * 1000,\n  fast: 1 * 60 * 1000,\n  immediately: 1 * 60 * 1000,\n};\n\nexport default class handler {\n  handlerName = 'default';\n\n  NOOP = 'Nothing to do';\n\n  // default handler doesn't cache page config,\n  // as retrieving it is a cheap operation\n  targetLanguagesConfigExpiresAfter = 0;\n\n  constructor(location, document, moreLanguages, lessLanguages) {\n    this.location = location;\n    this.document = document;\n    this.moreLanguages = moreLanguages;\n    this.lessLanguages = lessLanguages;\n  }\n\n  SUPPORTED_LANGUAGES() {\n    return [];\n  }\n\n  get cacheKey() {\n    return `handler.${this.handlerName}`;\n  }\n\n  get isEnabled() {\n    const featureName =\n      'CT_' + this.handlerName.toUpperCase().replace(/-/g, '_');\n    return FEATURES[featureName];\n  }\n\n  async needToTweakLanguages() {\n    console.log(`Entering needToTweakLanguages() of ${this.handlerName}`);\n    const $self = this;\n    return Promise.all([\n      storageGetSync(['userSettings', 'lastPromptTs']),\n      storageGet($self._achievementKey()),\n    ])\n      .then(async ([userData, expectAchievementData]) => {\n        const expectAchievement =\n          expectAchievementData[$self._achievementKey()];\n        if (FEATURES.ACHIEVEMENTS && expectAchievement) {\n          console.log(\n            `NOT checking the last prompt timestamp, as an achievement is expected`\n          );\n          storageRemove($self._achievementKey());\n          return true;\n        }\n\n        // Check if it's too early for any prompts\n        const userSettings = userData.userSettings || {};\n        const speed = userSettings.speed || 'gentle';\n        const lastPromptTs = userData.lastPromptTs || 0;\n        const timeSinceUserPrompted =\n          Math.floor(Date.now() / 1000) - lastPromptTs;\n\n        // Caching is disabled in dev environment to ease debugging\n        if (process.env.NODE_ENV === 'development') return false;\n\n        // Too early for any prompts\n        if (promptsFrequency[speed] >= timeSinceUserPrompted) {\n          return Promise.reject($self.NOOP);\n        }\n\n        // Regular config check, no achievements expected\n        return false;\n      })\n      .then(async (expectAchievement) => {\n        console.log(`Refreshing targetLanguagesConfig at ${$self.handlerName}`);\n        const config = await $self.targetLanguagesConfig();\n        console.log(`targetLanguagesConfig at ${$self.handlerName} is`, config);\n\n        if (FEATURES.ACHIEVEMENTS && expectAchievement) {\n          if (!config) {\n            browser.runtime.sendMessage({\n              type: 'content',\n              subtype: 'MsgAchievementUnlocked',\n              acKey: $self._achievementKey(),\n              options: $self._getAchievementVariables(),\n            });\n          } else {\n            console.error(\n              `Expected achievement, but targetLanguagesConfig still present at ${$self.handlerName}`\n            );\n          }\n          return Promise.reject($self.NOOP);\n        }\n\n        if (config == null) {\n          return Promise.reject($self.NOOP);\n        }\n\n        return config;\n      });\n  }\n\n  removeUI() {\n    const oldElements = this.document.getElementsByClassName(\n      'lahidnaUkrainizatsiya'\n    );\n    for (let el of oldElements) {\n      el.remove();\n    }\n  }\n\n  async tweakLanguages() {\n    const $self = this;\n    console.log(`Entering tweakLanguages of ${this.handlerName}`);\n\n    return $self\n      .suggestToChangeLanguages()\n      .then((language) => $self.changeLanguageTo(language))\n      .then(() => $self._expectAchievement())\n      .then(() => $self._reloadPageOnceLanguagesChanged());\n  }\n\n  async _expectAchievement() {\n    if (!FEATURES.ACHIEVEMENTS) return true;\n    // NOTE: the same key is used in two different namespaces.\n    //\n    // content/default.js is using storage.local to mark that achievement\n    //   is expected and should be visualised;\n    //\n    // achievements.js is using storage.sync to permanently track the goals achieved\n    storageSet({ [this._achievementKey()]: 1 });\n\n    return true;\n  }\n\n  _reloadPageOnceLanguagesChanged() {\n    this.location.reload();\n  }\n\n  _achievementKey() {\n    return `CT_${this.handlerName}`;\n  }\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'Ð ÐµÑÑƒÑ€Ñ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async suggestToChangeLanguages() {\n    console.log(`Entering suggestToChangeLanguages of ${this.handlerName}`);\n    const $self = this;\n    return $self.targetLanguagesConfig().then(\n      (languageConfig) =>\n        new Promise(async (resolve, reject) => {\n          $self.removeUI();\n          const callToAction = $self._tweakLanguagesCTA(languageConfig);\n          const floaterHTML = `\n<div style=\"z-index:5000; width:100%; position: fixed; top: 0;\" class=\"lahidnaUkrainizatsiya\" translate=\"no\">\n  <div style=\"margin: 20px; padding: 10px; border: 1px solid rgba(0,0,0,.09); box-shadow: 15px -4px 17px 1px rgba(19, 19, 22, 0.28); border-radius: 3px; background: #f3f1f1;\">\n    <img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCA1OCAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ4LjYwNTMgMTMuOTg0NUM0Ny44NTM5IDkuMTc0OTUgNDMuNjg0MyA1LjQ4MzQ5IDM4LjY2NjkgNS40ODM0OUMzNi43Nzk0IDUuNDgzNDkgMzQuOTY1NiA2LjAwNTcyIDMzLjM5MjQgNi45Nzk3N0MzMC45OTkxIDIuOTU3NTIgMjYuNjkwNCAwLjQ1NDU1OSAyMS45MDM4IDAuNDU0NTU5QzE0LjUwOTQgMC40NTQ1NTkgOC40OTMzMSA2LjQ3MDYxIDguNDkzMzEgMTMuODY1QzguNDkzMzEgMTMuOTEwOSA4LjQ5MzMxIDEzLjk1ODQgOC40OTQ5OCAxNC4wMDQyQzMuNzQyNjQgMTQuODA0NyAwIDE4Ljk0OCAwIDIzLjkyMjlDMCAyOS40NjkxIDQuNjIzMzggMzMuOTgwOCAxMC4xNjk2IDMzLjk4MDhINDcuMDQ4NUM1Mi41OTQ3IDMzLjk4MDggNTcuMjE4MSAyOS40NjkxIDU3LjIxODEgMjMuOTIyOUM1Ny4yMTgxIDE4LjkwNTUgNTMuNDE0OSAxNC43MzU5IDQ4LjYwNTMgMTMuOTg0NVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=\" style=\"width: 25px; height: 25px; border-radius: 50%; background-color: #009393; padding: 5px; box-shadow: 2px 1px 1px rgba(0, 0, 0, 0.3); margin-right: 1em; vertical-align:middle;\">\n    <span>${callToAction}</span>\n    <div style=\"float: right\">\n      <input type='button' value='Ð¢Ð°Ðº' style='padding: 4px; margin-top: 4px;' class='yes-btn' />\n      <input type='button' value='ÐŸÑ–Ð·Ð½Ñ–ÑˆÐµ' style='padding: 4px; margin-top: 4px;' class='no-btn' />\n    </div>\n  </div>\n</div>\n<style>\n  /* Make sure inner elements don't inhering any CSS, but browser defaults */\n  :host {\n    all: initial !important;\n  }\n</style>\n`;\n          const floaterHost = $self.document.createElement('div');\n          $self.document.body.appendChild(floaterHost);\n          const dom = floaterHost.attachShadow({ mode: 'open' });\n          dom.innerHTML = floaterHTML.trim();\n          const floater = dom.firstChild;\n\n          const observer = new MutationObserver(function (mutations) {\n            // check for removed target\n            mutations.forEach(function (mutation) {\n              var nodes = Array.from(mutation.removedNodes);\n              if (nodes.indexOf(floater) <= -1) return;\n              if (reject) {\n                reject('node removed');\n              }\n              observer.disconnect();\n            });\n          });\n\n          observer.observe(dom, {\n            childList: true,\n          });\n\n          // Create ui in DOM\n          // Bind 'Yes' function\n          dom\n            .querySelector('.lahidnaUkrainizatsiya .yes-btn')\n            .addEventListener('click', function (e) {\n              resolve(languageConfig);\n              reject = undefined;\n              floater.remove();\n            });\n\n          // Bind 'No' function\n          dom\n            .querySelector('.lahidnaUkrainizatsiya .no-btn')\n            .addEventListener('click', function (e) {\n              const options = JSON.stringify(languageConfig);\n              reject(`user answered no to options ${options}`);\n              reject = undefined;\n              floater.remove();\n            });\n        })\n    );\n  }\n\n  async changeLanguageTo(languages) {\n    console.log(\n      `Entering changeLanguageTo of ${this.handlerName}. Languages config:`,\n      languages\n    );\n    return this._changeLanguageTo(languages).then(() =>\n      this._targetLanguagesConfigDropCache()\n    );\n  }\n\n  async targetLanguagesConfig() {\n    return this._targetLanguagesConfigCached().then((cachedConfig) => {\n      if (cachedConfig && cachedConfig.data) {\n        return cachedConfig.data;\n      }\n      return this._targetLanguagesConfig().then((config) =>\n        this._targetLanguagesConfigUpdateCache(config)\n      );\n    });\n  }\n\n  async _targetLanguagesConfig() {\n    const moreLanguages = this.moreLanguages;\n    const supportedWantedLanguages = this.SUPPORTED_LANGUAGES().filter(\n      (value) => moreLanguages.includes(value)\n    );\n\n    if (supportedWantedLanguages.length == 0) return Promise.reject(this.NOOP);\n\n    const uiLanguage = this.document.documentElement.lang\n      .replace(/-.*/, '')\n      .toLowerCase();\n\n    if (supportedWantedLanguages.indexOf(uiLanguage) === 0)\n      return Promise.reject(this.NOOP);\n\n    const config = supportedWantedLanguages.filter(\n      (value) => value !== uiLanguage\n    );\n\n    if (!config.length) {\n      return Promise.reject(this.NOOP);\n    }\n\n    return config;\n  }\n\n  _targetLanguagesConfigCached() {\n    return storageGet(this.cacheKey).then((items) => {\n      const cache = items[this.cacheKey];\n      if (!cache || !cache.ts) {\n        return;\n      }\n      const targetLanguagesConfigAge = Math.round(\n        (new Date().getTime() - cache.ts) / 1000\n      );\n      if (targetLanguagesConfigAge > this.targetLanguagesConfigExpiresAfter) {\n        return;\n      }\n      return cache;\n    });\n  }\n\n  async _targetLanguagesConfigUpdateCache(config) {\n    const cacheKey = this.cacheKey;\n    storageSet({\n      cacheKey: { data: config, ts: new Date().getTime() },\n    });\n    return config;\n  }\n\n  async _targetLanguagesConfigDropCache() {\n    return storageRemove(this.cacheKey);\n  }\n\n  /* _generateNewLanguagesConfig() takes the current service config\n   * in the form of an array of language codes\n   * Returns the new suggested configuration, according to the user preferences.\n   *\n   * _generateNewLanguagesConfig() will return null if user preferences trigger\n   * no changes to the service configuration or the initial service configuration was null or an empty array\n   */\n\n  _generateNewLanguagesConfig(currentConfig) {\n    if (!currentConfig) return null;\n\n    const $self = this;\n\n    const moreLanguages = this.moreLanguages;\n    const lessLanguages = this.lessLanguages;\n    const supportedWantedLanguages = $self\n      .SUPPORTED_LANGUAGES()\n      .filter((value) => moreLanguages.includes(value));\n\n    const newLangs = currentConfig.filter((lang_lang) => {\n      // the 'replace' part will have to evolve, as we add support for various dialects\n      const lang = lang_lang.toLowerCase().replace(/-.*/, '');\n      return lessLanguages.indexOf(lang) < 0;\n    });\n\n    newLangs.unshift(\n      ...supportedWantedLanguages.filter((lang_lang) => {\n        const lang = lang_lang.toLowerCase().replace(/-.*/, '');\n        return newLangs.indexOf(lang) < 0;\n      })\n    );\n\n    if (newLangs.length === 0) {\n      return null;\n    }\n\n    // No changes needed\n    if (\n      newLangs.concat().sort().join(',') ===\n      currentConfig.concat().sort().join(',')\n    ) {\n      return null;\n    }\n\n    // Suggest new config\n    return newLangs;\n  }\n\n  _getAchievementVariables() {\n    const dict = {};\n\n    // Don't show languages unsupported by the handler\n    const supportedWantedLanguages = this.SUPPORTED_LANGUAGES().filter(\n      (value) => this.moreLanguages.includes(value)\n    );\n\n    dict.lessLanguages = this.lessLanguages\n      .map((l) => `__MSG_lang_${l.replace(/-/g, '_')}_genetivus__`)\n      .join(', ')\n      .replace(/, ([^,]+)$/, ' Ñ‚Ð° $1');\n    dict.moreLanguages = supportedWantedLanguages\n      .map((l) => `__MSG_lang_${l.replace(/-/g, '_')}_nominativus__`)\n      .join(', ')\n      .replace(/, ([^,]+)$/, ' Ñ‚Ð° $1');\n\n    if (supportedWantedLanguages.length) {\n      dict.firstLanguage = `__MSG_lang_${supportedWantedLanguages[0].replace(\n        /-/g,\n        '_'\n      )}_instrumentalis__`;\n    } else {\n      // For now this is known to happen with gs_rewrite,\n      // which only requires 'lessLanguages'\n      reportError(\n        'Goal reached, none of wanted languages supported',\n        new Error('stack')\n      );\n      dict.firstLanguage = '';\n    }\n\n    return dict;\n  }\n}\n","import defaultHandler from './default';\nimport { reportError } from '../util';\n\n// In Firefox fetch is executed in the context of extension,\n// content.fetch - in the content of the page. Hence this hack\n// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\nconst contextFetch = typeof variable !== 'undefined' ? content.fetch : fetch;\n\nexport default class facebookHandler extends defaultHandler {\n  handlerName = 'facebook';\n\n  // fb page config requires three requests to fb backend,\n  // so cache results for six hours\n  targetLanguagesConfigExpiresAfter = 5 * 60; // 6 * 60 * 60;\n\n  SUPPORTED_LANGUAGES() {\n    return ['uk', 'en'];\n  }\n\n  // All FB locales for future use\n  // {\"uk\":\"uk_UA\",\"en\":\"en_UD\",\"so\":\"so_SO\",\"af\":\"af_ZA\",\"az\":\"az_AZ\",\"id\":\"id_ID\",\"ms\":\"ms_MY\",\"jv\":\"jv_ID\",\"cx\":\"cx_PH\",\"bs\":\"bs_BA\",\"br\":\"br_FR\",\"ca\":\"ca_ES\",\"cs\":\"cs_CZ\",\"co\":\"co_FR\",\"cy\":\"cy_GB\",\"da\":\"da_DK\",\"de\":\"de_DE\",\"et\":\"et_EE\",\"es\":\"es_ES\",\"eo\":\"eo_EO\",\"eu\":\"eu_ES\",\"tl\":\"tl_PH\",\"fo\":\"fo_FO\",\"fr\":\"fr_FR\",\"fy\":\"fy_NL\",\"ff\":\"ff_NG\",\"fn\":\"fn_IT\",\"ga\":\"ga_IE\",\"gl\":\"gl_ES\",\"gn\":\"gn_PY\",\"ha\":\"ha_NG\",\"hr\":\"hr_HR\",\"rw\":\"rw_RW\",\"iu\":\"iu_CA\",\"ik\":\"ik_US\",\"is\":\"is_IS\",\"it\":\"it_IT\",\"sw\":\"sw_KE\",\"ht\":\"ht_HT\",\"ku\":\"ku_TR\",\"lv\":\"lv_LV\",\"lt\":\"lt_LT\",\"hu\":\"hu_HU\",\"mg\":\"mg_MG\",\"mt\":\"mt_MT\",\"nl\":\"nl_BE\",\"nb\":\"nb_NO\",\"nn\":\"nn_NO\",\"uz\":\"uz_UZ\",\"pl\":\"pl_PL\",\"pt\":\"pt_PT\",\"ro\":\"ro_RO\",\"sc\":\"sc_IT\",\"sn\":\"sn_ZW\",\"sq\":\"sq_AL\",\"sz\":\"sz_PL\",\"sk\":\"sk_SK\",\"sl\":\"sl_SI\",\"fi\":\"fi_FI\",\"sv\":\"sv_SE\",\"vi\":\"vi_VN\",\"tr\":\"tr_TR\",\"zz\":\"zz_TR\",\"el\":\"el_GR\",\"be\":\"be_BY\",\"bg\":\"bg_BG\",\"ky\":\"ky_KG\",\"kk\":\"kk_KZ\",\"mk\":\"mk_MK\",\"mn\":\"mn_MN\",\"ru\":\"ru_RU\",\"sr\":\"sr_RS\",\"tt\":\"tt_RU\",\"tg\":\"tg_TJ\",\"ka\":\"ka_GE\",\"hy\":\"hy_AM\",\"he\":\"he_IL\",\"ur\":\"ur_PK\",\"ar\":\"ar_AR\",\"ps\":\"ps_AF\",\"fa\":\"fa_IR\",\"cb\":\"cb_IQ\",\"sy\":\"sy_SY\",\"tz\":\"tz_MA\",\"am\":\"am_ET\",\"ne\":\"ne_NP\",\"mr\":\"mr_IN\",\"hi\":\"hi_IN\",\"as\":\"as_IN\",\"bn\":\"bn_IN\",\"pa\":\"pa_IN\",\"gu\":\"gu_IN\",\"or\":\"or_IN\",\"ta\":\"ta_IN\",\"te\":\"te_IN\",\"kn\":\"kn_IN\",\"ml\":\"ml_IN\",\"si\":\"si_LK\",\"th\":\"th_TH\",\"lo\":\"lo_LA\",\"my\":\"my_MM\",\"km\":\"km_KH\",\"ko\":\"ko_KR\",\"zh\":\"zh_HK\",\"ja\":\"ja_KS\",\"uk_UA\":\"uk\",\"en_GB\":\"en\",\"so_SO\":\"so\",\"af_ZA\":\"af\",\"az_AZ\":\"az\",\"id_ID\":\"id\",\"ms_MY\":\"ms\",\"jv_ID\":\"jv\",\"cx_PH\":\"cx\",\"bs_BA\":\"bs\",\"br_FR\":\"br\",\"ca_ES\":\"ca\",\"cs_CZ\":\"cs\",\"co_FR\":\"co\",\"cy_GB\":\"cy\",\"da_DK\":\"da\",\"de_DE\":\"de\",\"et_EE\":\"et\",\"en_US\":\"en\",\"en_UD\":\"en\",\"es_LA\":\"es\",\"es_ES\":\"es\",\"eo_EO\":\"eo\",\"eu_ES\":\"eu\",\"tl_PH\":\"tl\",\"fo_FO\":\"fo\",\"fr_CA\":\"fr\",\"fr_FR\":\"fr\",\"fy_NL\":\"fy\",\"ff_NG\":\"ff\",\"fn_IT\":\"fn\",\"ga_IE\":\"ga\",\"gl_ES\":\"gl\",\"gn_PY\":\"gn\",\"ha_NG\":\"ha\",\"hr_HR\":\"hr\",\"rw_RW\":\"rw\",\"iu_CA\":\"iu\",\"ik_US\":\"ik\",\"is_IS\":\"is\",\"it_IT\":\"it\",\"sw_KE\":\"sw\",\"ht_HT\":\"ht\",\"ku_TR\":\"ku\",\"lv_LV\":\"lv\",\"lt_LT\":\"lt\",\"hu_HU\":\"hu\",\"mg_MG\":\"mg\",\"mt_MT\":\"mt\",\"nl_NL\":\"nl\",\"nb_NO\":\"nb\",\"nn_NO\":\"nn\",\"uz_UZ\":\"uz\",\"pl_PL\":\"pl\",\"pt_BR\":\"pt\",\"pt_PT\":\"pt\",\"ro_RO\":\"ro\",\"sc_IT\":\"sc\",\"sn_ZW\":\"sn\",\"sq_AL\":\"sq\",\"sz_PL\":\"sz\",\"sk_SK\":\"sk\",\"sl_SI\":\"sl\",\"fi_FI\":\"fi\",\"sv_SE\":\"sv\",\"vi_VN\":\"vi\",\"tr_TR\":\"tr\",\"nl_BE\":\"nl\",\"zz_TR\":\"zz\",\"el_GR\":\"el\",\"be_BY\":\"be\",\"bg_BG\":\"bg\",\"ky_KG\":\"ky\",\"kk_KZ\":\"kk\",\"mk_MK\":\"mk\",\"mn_MN\":\"mn\",\"ru_RU\":\"ru\",\"sr_RS\":\"sr\",\"tt_RU\":\"tt\",\"tg_TJ\":\"tg\",\"ka_GE\":\"ka\",\"hy_AM\":\"hy\",\"he_IL\":\"he\",\"ur_PK\":\"ur\",\"ar_AR\":\"ar\",\"ps_AF\":\"ps\",\"fa_IR\":\"fa\",\"cb_IQ\":\"cb\",\"sy_SY\":\"sy\",\"tz_MA\":\"tz\",\"am_ET\":\"am\",\"ne_NP\":\"ne\",\"mr_IN\":\"mr\",\"hi_IN\":\"hi\",\"as_IN\":\"as\",\"bn_IN\":\"bn\",\"pa_IN\":\"pa\",\"gu_IN\":\"gu\",\"or_IN\":\"or\",\"ta_IN\":\"ta\",\"te_IN\":\"te\",\"kn_IN\":\"kn\",\"ml_IN\":\"ml\",\"si_LK\":\"si\",\"th_TH\":\"th\",\"lo_LA\":\"lo\",\"my_MM\":\"my\",\"km_KH\":\"km\",\"ko_KR\":\"ko\",\"zh_TW\":\"zh\",\"zh_CN\":\"zh\",\"zh_HK\":\"zh\",\"ja_JP\":\"ja\",\"ja_KS\":\"ja\"}\n  static LANG_MAP = {\n    uk: 'uk_UA',\n    en: 'en_GB',\n    ru: 'ru_RU',\n  };\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'Facebook Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async _getTargetNoTranslateLangs() {\n    /*\n     * Fetches the \"Languages for which you don't\n     * want to be offered translations\" part of Profile\n     */\n    const { fb_dtsg_match_async, user_id_match } =\n      this._get_fb_tstg_and_user_id();\n    const $self = this;\n\n    return fetch(\n      'https://www.facebook.com/ajax/settings/language/secondary.php' +\n        `?fb_dtsg_ag=${fb_dtsg_match_async}&__user=${user_id_match}&__a=1`\n    )\n      .then((response) => response.text())\n      .then((html) => $self._parseNotranslateLanguages(html))\n      .catch((e) => {\n        reportError('fb _getTargetNoTranslateLangs() failed', e);\n        return e;\n      });\n  }\n\n  async _getTargetTranslateLang() {\n    /*\n     * Fetches the \"Language into which you'd\n     * like to have posts translated\"\n     */\n    const { fb_dtsg_match, fb_dtsg_match_async, user_id_match } =\n      this._get_fb_tstg_and_user_id();\n\n    return fetch(\n      'https://www.facebook.com/ajax/settings/language/primary.php' +\n        `?fb_dtsg_ag=${fb_dtsg_match_async}&__user=${user_id_match}&__a=1&__dyn=${fb_dtsg_match_async}`\n    )\n      .then((response) => response.text())\n      .then((html) => {\n        const result = [];\n        const re = /value=\\\\*\"([^\"]+?)\\\\*\" selected=\\\\*\"1\\\\*\"/;\n        const translate_to_match = html.match(re);\n\n        if (\n          !translate_to_match ||\n          translate_to_match[1] !=\n            facebookHandler.LANG_MAP[this.moreLanguages[0]]\n        ) {\n          return this.moreLanguages[0];\n        }\n\n        return null;\n      })\n      .catch((e) => {\n        reportError('fb _getTargetTranslateLang() failed', e);\n        return e;\n      });\n  }\n\n  async _getTargetDisableAutotranslateLangs() {\n    /*\n     * Fetches the \"Language into which you'd\n     * like to have posts translated\"\n     */\n    const { fb_dtsg_match, fb_dtsg_match_async, user_id_match } =\n      this._get_fb_tstg_and_user_id();\n    const $self = this;\n\n    return fetch(\n      'https://www.facebook.com/ajax/settings/language/disable_autotranslate.php' +\n        `?fb_dtsg_ag=${fb_dtsg_match_async}&__user=${user_id_match}&__a=1`\n    )\n      .then((response) => response.text())\n      .then((html) => $self._parseNotranslateLanguages(html))\n      .catch((e) => {\n        reportError('fb _getTargetDisableAutotranslateLangs() failed', e);\n        return e;\n      });\n  }\n\n  async _targetLanguagesConfig() {\n    const $self = this;\n    const logoutForm = this.document.querySelector('form[action^=\"/logout\"]');\n    if (!logoutForm) {\n      // Not logged in, nothing to do\n      return null;\n    }\n\n    return Promise.all([\n      super._targetLanguagesConfig(),\n      this._getTargetTranslateLang(),\n      this._getTargetNoTranslateLangs(),\n      this._getTargetDisableAutotranslateLangs(),\n    ]).then((results) => {\n      if (results.filter((r) => r != null).length == 0) {\n        return;\n      }\n      const [\n        uiLangs,\n        translateLang,\n        noTranslateLangs,\n        disableAutotranslateLangs,\n      ] = results;\n      console.log(results);\n\n      return {\n        uiLangs,\n        translateLang,\n        noTranslateLangs,\n        disableAutotranslateLangs,\n      };\n    });\n  }\n\n  async _changeLanguageTo(languages) {\n    try {\n      return Promise.all([\n        this._changeUILanguageTo(languages.uiLangs),\n        this._changeNoTranslateLanguagesTo(languages.noTranslateLangs),\n        this._changeTranslateLanguageTo(languages.translateLang),\n        this._changeDisableAutotranslateLanguagesTo(\n          languages.disableAutotranslateLangs\n        ),\n      ])\n        .then((results) => {\n          if (results.filter((r) => r != true).length == 0) {\n            return;\n          }\n          const [\n            UILangChangedOK,\n            noTranslateLanguagesChangedOk,\n            translationsChangedOk,\n            disableAutotranslateLanguagesOk,\n          ] = results;\n          return Promise.reject(\n            'One of changeLanguageTo() subcomponents failed',\n            results\n          );\n        })\n        .catch((e) => {\n          console.log('Error http execution', e);\n          return e;\n        });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n\n  _get_fb_tstg_and_user_id() {\n    if (this['_cached_fb_dtsg']) {\n      return this['_cached_fb_dtsg'];\n    }\n\n    const doc = new XMLSerializer().serializeToString(this.document);\n    // fb_dtsg_match[1] contains fb_dtsg\n    const fb_dtsg_match = doc.match(\n      /\"token\":\"([^\"]+?)\",\"async_get_token\":\"([^\"]+?)\"/\n    );\n    // user_id_match[1] contains user id\n    const user_id_match = doc.match(/__user=(\\d+)&/);\n\n    this['_cached_fb_dtsg'] = {\n      fb_dtsg_match: fb_dtsg_match[1],\n      fb_dtsg_match_async: fb_dtsg_match[2],\n      user_id_match: user_id_match[1],\n    };\n\n    return this['_cached_fb_dtsg'];\n  }\n\n  _changeUILanguageTo(uiLanguages) {\n    if (!uiLanguages || uiLanguages.length <= 0) {\n      return Promise.resolve(true);\n    }\n\n    const { fb_dtsg_match, user_id_match } = this._get_fb_tstg_and_user_id();\n\n    const langValue = facebookHandler.LANG_MAP[uiLanguages[0]];\n    if (!langValue) {\n      throw new Error(`Language ${uiLanguages[0]} is not supported.`);\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: `fb_dtsg=${fb_dtsg_match}&new_language=${langValue}&new_fallback_language=&__user=${user_id_match}`,\n    };\n\n    return contextFetch(\n      'https://www.facebook.com/ajax/settings/language/account.php',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  _changeNoTranslateLanguagesTo(dontTranslateLangs) {\n    if (!dontTranslateLangs || dontTranslateLangs.length == 0) {\n      return Promise.resolve(true);\n    }\n\n    const requestOptions =\n      this._tokenizedDialectsToRequestOptions(dontTranslateLangs);\n\n    return contextFetch(\n      'https://www.facebook.com/ajax/settings/language/secondary.php',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n  _changeDisableAutotranslateLanguagesTo(disableAuthtranslateLangs) {\n    if (!disableAuthtranslateLangs || disableAuthtranslateLangs.length == 0) {\n      return Promise.resolve(true);\n    }\n\n    const requestOptions = this._tokenizedDialectsToRequestOptions(\n      disableAuthtranslateLangs\n    );\n\n    return contextFetch(\n      'https://www.facebook.com/ajax/settings/language/disable_autotranslate.php',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  _changeTranslateLanguageTo(translateLang) {\n    if (!translateLang) {\n      return Promise.resolve(true);\n    }\n\n    const langValue = facebookHandler.LANG_MAP[translateLang];\n    if (!langValue) {\n      throw new Error(`Language ${translateLang} is not supported.`);\n    }\n\n    const { fb_dtsg_match_async, user_id_match, fb_dtsg_match } =\n      this._get_fb_tstg_and_user_id();\n\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: `fb_dtsg=${fb_dtsg_match}&primary_dialect=${langValue}&__user=${user_id_match}&__a=1`,\n    };\n\n    return contextFetch(\n      'https://www.facebook.com/ajax/settings/language/primary.php',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  _parseNotranslateLanguages(html) {\n    const result = [];\n    const re = /\"uniqueID\":\"(.+?)\"/g;\n\n    const lessLanguages = this.lessLanguages\n      .map((l) => facebookHandler.LANG_MAP[l])\n      .filter((l) => l != null);\n    const moreLanguages = this.moreLanguages\n      .map((l) => facebookHandler.LANG_MAP[l])\n      .filter((l) => l != null);\n\n    let match;\n\n    do {\n      match = re.exec(html);\n      if (match) {\n        result.push(match[1]);\n      }\n    } while (match);\n\n    const excludeLangs = result.filter((l) => lessLanguages.includes(l));\n    const addLangs = moreLanguages.filter((l) => !result.includes(l));\n\n    if (excludeLangs.length > 0) {\n      const newConfig = result.filter((l) => !lessLanguages.includes(l));\n      newConfig.push(...addLangs);\n      return newConfig;\n    }\n    return null;\n  }\n\n  _tokenizedDialectsToRequestOptions(dialects) {\n    const { fb_dtsg_match_async, user_id_match, fb_dtsg_match } =\n      this._get_fb_tstg_and_user_id();\n\n    const tokenizedDialects = dialects.map((l) => `%20${l}`).join('');\n\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: `fb_dtsg=${fb_dtsg_match}&tokenized_dialects=${tokenizedDialects}&__user=${user_id_match}&__a=1`,\n    };\n    return requestOptions;\n  }\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { getExtensionVersion, storageSet } from './util';\nimport { v4 as uuidv4 } from 'uuid';\nimport { storageGetSync, storageSetSync, FEATURES } from './util';\nimport { serializeError } from 'serialize-error';\nimport browser from 'webextension-polyfill';\n\nexport let API_BASE = process.env.API_BASE_URI;\nexport let userId;\n\nexport const PLATFORM =\n///////////////////////////////\n////////////\n//////////////////////////////\n('chrome');\n//////////////////////////////\n///////////\n/////////\n////////////\n//////////\n\nstorageGetSync('userId').then((items) => {\n  if (items.userId) {\n    userId = items.userId;\n  } else {\n    userId = uuidv4();\n    storageSetSync({ userId: userId }, function () {\n      browser.runtime.openOptionsPage();\n    });\n  }\n});\n\nexport function sendEvent(type, data) {\n  console.log('sending event', type, data);\n\n  if (!data) {\n    data = {};\n  }\n  const body = { type, data };\n  return _sendJSON('/events', body);\n}\n\nexport function reportError(desc, errorData) {\n  const strError =\n    errorData instanceof Error ? serializeError(errorData) : errorData;\n\n  console.log('sending error', desc, strError);\n\n  _sendJSON('/error', { desc: desc, data: strError });\n}\n\nfunction _sendJSON(path, body) {\n  let newUser = false;\n  storageGetSync('userSettings')\n    .then((settings) => {\n      if (\n        !settings ||\n        !settings.userSettings ||\n        !settings.userSettings.collectStats\n      ) {\n        return Promise.reject('collectStats is disabled');\n      }\n\n      return settings;\n    })\n    .then((settings) => {\n      const userSettingsCp = { ...settings.userSettings };\n      delete userSettingsCp['collectStats'];\n      delete userSettingsCp['is_18'];\n\n      const options = {\n        headers: { 'content-type': 'application/json' },\n        body: JSON.stringify({\n          ...body,\n          userId: userId || 'unknown',\n          eventId: uuidv4(),\n          version: getExtensionVersion(),\n          platform: PLATFORM,\n          userSettings: userSettingsCp,\n        }),\n        method: 'POST',\n      };\n\n      return _sendInfo(path, options);\n    })\n    .then((response) => {\n      if (response.status !== 200) {\n        return Promise.reject({\n          error: 'Could not send JSON',\n          status: response.status,\n        });\n      }\n      return 1;\n    })\n    .catch((error) => {\n      if (error === 'collectStats is disabled') {\n        return;\n      }\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Failed to send an event', error);\n      }\n    });\n}\n\nfunction _sendInfo(path, options) {\n  return fetch(API_BASE + path, options)\n    .then((r) => {\n      if (process.env.NODE_ENV === 'development') {\n        console.info('event sent', data);\n      }\n      return r;\n    })\n    .catch((error) => {\n      console.log('Failed to send an event', error);\n    });\n}\n\nexport async function updateLocalFeatures() {\n  if (!navigator.onLine) return;\n  const env = process.env.NODE_ENV;\n\n  const path = `/features/${getExtensionVersion()}-${PLATFORM}.json`;\n\n  return fetch(API_BASE + path)\n    .then((r) => r.json())\n    .then((json) => {\n      if (!json || Object.keys(json) <= 0) {\n        return;\n      }\n      const missingFeatures = [];\n      for (const k of FEATURES) {\n        if ((!k) in json) {\n          missingFeatures.push(k);\n        }\n      }\n      if (missingFeatures.length) {\n        reportError(\n          `Incomplete featureset received from ${path}. Missing keys: ` +\n            missingFeatures.sort().join(', ')\n        );\n        return;\n      }\n      FEATURES = json;\n      storageSet({ features: json });\n    });\n}\n","import { sendEvent, reportError } from './networking';\nimport { storageGetSync, storageSetSync, getMessage, FEATURES } from './util';\nimport browser from 'webextension-polyfill';\n\nconst ACHIEVEMENTS = {\n  lng_choice: {\n    type: 'singular',\n    title: 'Ð’Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ð»Ð¸ÑÑ Ð· Ð¼Ð¾Ð²Ð¾ÑŽ!',\n    description: 'Ð’Ð¸ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ð»Ð¸ÑÑ Ð· Ð¼Ð¾Ð²Ð°Ð¼Ð¸, ÑÐºÑ– Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð±Ð°Ñ‡Ð¸Ñ‚Ð¸, Ð° ÑÐºÐ¸Ñ… â€“ Ð½Ñ–!',\n  },\n  gs_rewrite: {\n    type: 'stack',\n    milestones: [1, 100, 1000],\n    title_1: 'Google ðŸ”Ž Ð±ÐµÐ· {lessLanguages}!',\n    title_100: '100 Ã— Google ðŸ”Ž Ð±ÐµÐ· {lessLanguages}!',\n    title_1000: '100 Ã— Google ðŸ”Ž Ð±ÐµÐ· {lessLanguages}!!!',\n    description_1:\n      'Ð’Ð°ÑˆÑ– Ð¿ÐµÑ€ÑˆÑ– Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¸ Ð¿Ð¾ÑˆÑƒÐºÑƒ Ð² Google Ð±ÐµÐ· {lessLanguages}!\\nÐ’Ð°Ð¼ Ð¿Ð¾Ð´Ð¾Ð±Ð°Ñ”Ñ‚ÑŒÑÑ?',\n    description_100:\n      'Ð’Ð¶Ðµ ÑÑ‚Ð¾ Ñ€Ð°Ð·Ñ–Ð² ÑˆÑƒÐºÐ°Ð»Ð¸ Ð² Google Ð±ÐµÐ· {lessLanguages}!\\nÐ¯Ðº Ð²Ð°Ð¼? ðŸ˜Š',\n    description_1000:\n      'Ð’Ð¾Ñƒ! ÐÐ¶ 1000 (Ñ‚Ð¸ÑÑÑ‡Ð°!!!) Ð¿Ð¾ÑˆÑƒÐºÑ–Ð² Ð² Google, Ð±ÐµÐ· {lessLanguages}!\\nÐŸÐ¾Ð´Ñ–Ð»Ñ–Ñ‚ÑŒÑÑ Ð²Ñ€Ð°Ð¶ÐµÐ½Ð½ÑÐ¼Ð¸ Ð· Ð´Ñ€ÑƒÐ·ÑÐ¼Ð¸!',\n  },\n\n  // Content-scripts achievements: 'CT_' + handlerName\n  'CT_google-search': {\n    type: 'singular',\n    title: 'Google ðŸ”Ž Ð· Ñ–Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð¼ {firstLanguage}!',\n    description:\n      'Ð’Ñ–Ñ‚Ð°Ñ”Ð¼Ð¾ Ñƒ Ð²Ð°ÑˆÐ¾Ð¼Ñƒ Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾Ð¼Ñƒ Google!<br />Ð’Ð°Ð¼ Ð¿Ð¾Ð´Ð¾Ð±Ð°Ñ”Ñ‚ÑŒÑÑ Ñ–Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ {firstLanguage}?',\n  },\n\n  CT_wikipedia: {\n    type: 'stack',\n    milestones: [1, 10, 100],\n    title_1: 'Ð”Ð¾ Ð²Ð¸Ñ‚Ð¾ÐºÑ–Ð²! Wiki {firstLanguage}',\n    title_10: 'Ð“Ð»Ð¸Ð±ÑˆÐµ Ð² Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–ÑŽ {firstLanguage}!',\n    title_100: 'Ð†Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ {firstLanguage} ðŸ¤©',\n    description_1: 'Ð¦Ñ ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ° Wikipedia Ñ” {firstLanguage}? Ðž Ñ‚Ð°Ðº!',\n    description_10:\n      'Ð’Ð¶Ðµ Ð´ÐµÑÑ‚ÑŒ Ñ€Ð°Ð·Ñ–Ð² Ð·Ð½Ð°Ð¹ÑˆÐ»Ð¸ ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ¸ Wikipedia Ð²Ð°ÑˆÐ¸Ð¼Ð¸ Ð¼Ð¾Ð²Ð°Ð¼Ð¸!\\nÐ’Ð°Ð¼ Ð¿Ð¾Ð´Ð¾Ð±Ð°Ñ”Ñ‚ÑŒÑÑ? Ð”Ñ–Ð»Ñ–Ñ‚ÑŒÑÑ Ð· Ð´Ñ€ÑƒÐ·ÑÐ¼Ð¸!',\n    description_100:\n      'Ð’Ð¶Ðµ Ð² ÑÐ¾Ñ‚Ðµ Ð·Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ¸ Wikipedia Ð²Ð°ÑˆÐ¸Ð¼Ð¸ Ð¼Ð¾Ð²Ð°Ð¼Ð¸!\\nÐŸÐ¾Ð´Ð¾Ð±Ð°Ñ”Ñ‚ÑŒÑÑ? Ð”Ñ–Ð»Ñ–Ñ‚ÑŒÑÑ Ð· Ð´Ñ€ÑƒÐ·ÑÐ¼Ð¸!',\n  },\n};\n\nexport async function trackAchievement(acKey, options = {}) {\n  if (!FEATURES.ACHIEVEMENTS) return true;\n\n  const acData = ACHIEVEMENTS[acKey] || {};\n  const storageAchievementKey = `AC_${acKey}`;\n  if (!acData) {\n    reportError(\n      `Attempted to track unknown achievement '${acKey}'`,\n      new Error('stack')\n    );\n    return Promise.reject('Unknown achievement');\n  }\n  let { [storageAchievementKey]: value } = await storageGetSync(\n    storageAchievementKey\n  );\n  if (!value) value = 0;\n  value = value + 1;\n\n  // Singular type has a single implicit milestone\n  const milestones = acData.type == 'stack' ? acData.milestones : [1];\n  if (!milestones.includes(value)) return;\n\n  const achievementData = { [storageAchievementKey]: value };\n  return storageSetSync(achievementData).then(() => {\n    sendEvent(`Achievement unlocked`, {\n      achievementKey: storageAchievementKey,\n      achievementValue: value,\n    });\n    if (!options.silent) _displayNewAchievement(acKey, value, options);\n    return true;\n  });\n}\n\nasync function _displayNewAchievement(acKey, value, options) {\n  if (!FEATURES.ACHIEVEMENTS_DISPLAY) return;\n\n  console.log(`Display achievement ${acKey}`, value, options);\n  try {\n    let titleKey =\n      ACHIEVEMENTS[acKey].type == 'stack' ? `title_${value}` : 'title';\n    let descKey =\n      ACHIEVEMENTS[acKey].type == 'stack'\n        ? `description_${value}`\n        : 'description';\n\n    let title = options.title || ACHIEVEMENTS[acKey][titleKey];\n    let description = options.description || ACHIEVEMENTS[acKey][descKey];\n\n    const pattern = new RegExp(\n      '{(' + Object.keys(options).join('|') + ')}',\n      'g'\n    );\n\n    const localizeKey = (match, key) => {\n      let value = options[key];\n      if (!value) {\n        console.error(`No value defined for ${key} in ${acKey}`);\n        return key;\n      }\n\n      value = value.replace(/^__MSG_(\\w+)__$/, function (match, v1) {\n        return v1 ? getMessage(v1) : '';\n      });\n      return value ? value : key;\n    };\n\n    title = title.replace(pattern, localizeKey);\n    description = description.replace(pattern, localizeKey);\n\n    browser.notifications.create('AchievementUnlocked' + acKey, {\n      title: `ðŸ† ${title}`,\n      message: description,\n      iconUrl: '/icon-128.png',\n      type: 'basic',\n      buttons: [\n        {\n          title: 'Ð’ÑÑ– Ð´Ð¾ÑÑÐ³Ð½ÐµÐ½Ð½Ñ',\n        },\n      ],\n    });\n\n    browser.notifications.onButtonClicked.addListener(\n      function (notifId, btnIdx) {\n        if (notifId.startsWith('AchievementUnlocked') && btnIdx === 0) {\n          browser.tabs.create({ url: 'https://lu.hmara.info/achievements' });\n        }\n      }\n    );\n  } catch (e) {\n    reportError('Failed to create achievement notification', e);\n  }\n}\n","import defaultHandler from './default';\nimport { reportError, FEATURES } from '../util';\nimport { trackAchievement } from '../achievements';\nimport browser from 'webextension-polyfill';\n\nexport default class googleSearchHandler extends defaultHandler {\n  handlerName = 'google-search';\n\n  // google page config requires one requests to google backend,\n  // so cache results for three hours\n  targetLanguagesConfigExpiresAfter = 3 * 60 * 60;\n\n  SUPPORTED_LANGUAGES() {\n    return ['uk'];\n  }\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'ÐŸÐ¾ÑˆÑƒÐº Google Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async needToTweakLanguages() {\n    try {\n      if (\n        FEATURES.ACHIEVEMENTS &&\n        this.lessLanguages &&\n        this.lessLanguages.length\n      ) {\n        const url = new URL(location.href);\n        const lr = url.searchParams.get('lr');\n\n        if (lr && lr.match('-lang_')) {\n          browser.runtime.sendMessage({\n            type: 'content',\n            subtype: 'MsgAchievementUnlocked',\n            acKey: 'gs_rewrite',\n            options: this._getAchievementVariables(),\n          });\n        }\n      }\n    } catch (e) {\n      reportError('Failed to process gs_rewrite achievement', e);\n    }\n    return super.needToTweakLanguages();\n  }\n\n  async _targetLanguagesConfig() {\n    return null;\n\n    /*\n     * Fetches the \"Languages for which you don't\n     * want to be offered translations\" part of Profile\n     */\n    const preferencesUrl = this.location.origin + '/preferences#languages';\n    return fetch(preferencesUrl, { credentials: 'same-origin' })\n      .then((r) => r.text())\n      .then((html) => {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(html, 'text/html');\n        const googleSearchLangs = [\n          ...doc.querySelectorAll('#tsuid_1 input[name=\"lr\"][checked=\"1\"]'),\n        ].map((x) => x.value);\n        let googleDisplayLang = doc.querySelector(\n          '#tsuid_1 .URIeEf input[name=\"lang\"][checked=\"1\"]'\n        ).value;\n\n        const sig = doc.querySelector('input[name=\"sig\"]').value;\n\n        const moreLanguages = this.moreLanguages;\n        const lessLanguages = this.lessLanguages;\n        const supportedWantedLanguages = this.SUPPORTED_LANGUAGES().filter(\n          (value) => moreLanguages.includes(value)\n        );\n\n        if (\n          supportedWantedLanguages.length == 0 ||\n          supportedWantedLanguages.indexOf(googleDisplayLang) === 0\n        ) {\n          googleDisplayLang = null;\n        } else {\n          googleDisplayLang = supportedWantedLanguages[0];\n        }\n\n        const newGoogleSearchLangs = googleSearchLangs.filter((lang_lang) => {\n          const lang = lang_lang.replace(/^lang_/, '').toLowerCase();\n          return (\n            lessLanguages.indexOf(lang) < 0 &&\n            supportedWantedLanguages.indexOf(lang) < 0\n          );\n        });\n        newGoogleSearchLangs.unshift(\n          ...supportedWantedLanguages.map((l) => `lang_${l}`)\n        );\n\n        // No changes needed\n        if (\n          newGoogleSearchLangs.sort().join(',') ===\n            googleSearchLangs.sort().join(',') &&\n          !googleDisplayLang\n        ) {\n          return null;\n        }\n\n        return {\n          googleSearchLangs: newGoogleSearchLangs,\n          googleDisplayLang,\n          sig,\n        };\n      })\n      .catch((e) => {\n        reportError('Failed to parse Google Search preferences page', e);\n        return Promise.reject(this.NOOP);\n      });\n  }\n\n  async _changeLanguageTo(languages) {\n    try {\n      // e.g. https://www.google.com/setprefs?sig=0_53_.....&hl=uk&lang=uk&lr=lang_uk\n\n      const url = new URL(this.location.origin + '/setprefs');\n      url.searchParams.append('sig', languages.sig);\n      if (languages.googleDisplayLang) {\n        url.searchParams.append('hl', languages.googleDisplayLang);\n        url.searchParams.append('lang', languages.googleDisplayLang);\n      }\n      if (languages.googleSearchLangs) {\n        for (let lang of languages.googleSearchLangs) {\n          url.searchParams.append('lr', lang);\n        }\n      }\n\n      return fetch(url, { credentials: 'same-origin' })\n        .then((r) => r.text())\n        .then((html) => {\n          return true;\n        });\n    } catch (e) {\n      reportError('GSearch changeLanguageTo', err);\n      return Promise.reject(e);\n    }\n  }\n}\n","import defaultHandler from './default';\n\nexport default class wikipediaHandler extends defaultHandler {\n  handlerName = 'wikipedia';\n\n  SUPPORTED_LANGUAGES() {\n    return [\n      'uk',\n      'crh',\n      'hy',\n      'af',\n      'be',\n      'bg',\n      'de',\n      'en',\n      'tl',\n      'id',\n      'sw',\n      'nl',\n      'vi',\n      'tr',\n      'ca',\n      'da',\n      'et',\n      'es',\n      'eo',\n      'fr',\n      'hr',\n      'it',\n      'lv',\n      'lt',\n      'hu',\n      'no',\n      'pl',\n      'pt',\n      'ro',\n      'ru',\n      'sk',\n      'sl',\n      'fi',\n      'sv',\n      'is',\n      'cs',\n      'el',\n      'sr',\n      'iw',\n      'ar',\n      'fa',\n      'hi',\n      'th',\n      'zh-CN',\n      'zh-TW',\n      'ja',\n      'ko',\n    ];\n  }\n\n  async _targetLanguagesConfigCached() {\n    return null;\n  }\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'Ð¦Ñ ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ° Ñ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ¾ÑŽ. ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ð¸?';\n  }\n\n  async _targetLanguagesConfig() {\n    const currentLang = document.querySelector('html').getAttribute('lang');\n    if (this.moreLanguages.includes(currentLang)) {\n      return null;\n    }\n\n    const langs = {};\n    document\n      .querySelectorAll(\n        '#p-lang .vector-menu-content a.interlanguage-link-target'\n      )\n      .forEach((a) => (langs[a.getAttribute('lang')] = a.getAttribute('href')));\n\n    // Wiki layout changed, we support both\n    if (!Object.keys(langs).length) {\n      document\n        .querySelectorAll('li.interlanguage-link a.interlanguage-link-target')\n        .forEach(\n          (a) => (langs[a.getAttribute('lang')] = a.getAttribute('href'))\n        );\n    }\n\n    // Wiki layout changed again, different wikis maintain different layout\n    if (!Object.keys(langs).length) {\n      document\n        .querySelectorAll('#p-lang-btn li.interlanguage-link > a')\n        .forEach(\n          (a) => (langs[a.getAttribute('lang')] = a.getAttribute('href'))\n        );\n    }\n\n    for (var lng of this.moreLanguages) {\n      if (!langs[lng]) continue;\n      return [lng, langs[lng]];\n    }\n\n    return null;\n  }\n\n  async _changeLanguageTo(language) {\n    window.location.replace(language[1]);\n  }\n\n  _reloadPageOnceLanguagesChanged() {\n    // do nothing, override base class\n  }\n}\n","import defaultHandler from './default';\nimport { reportError } from '../util';\n\n// In Firefox fetch is executed in the context of extension,\n// content.fetch - in the content of the page. Hence this hack\n// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\nconst contextFetch = typeof variable !== 'undefined' ? content.fetch : fetch;\n\nexport default class linkedinHandler extends defaultHandler {\n  handlerName = 'linkedin';\n\n  SUPPORTED_LANGUAGES() {\n    return ['uk'];\n  }\n\n  // scraped from https://www.linkedin.com/mypreferences/d/language\n  static LANG_TO_LOCALE = {\n    ar: 'ar_AE',\n    cs: 'cs_CZ',\n    da: 'da_DK',\n    de: 'de_DE',\n    en: 'en_US',\n    es: 'es_ES',\n    fr: 'fr_FR',\n    hi: 'hi_IN',\n    in: 'in_ID',\n    it: 'it_IT',\n    ja: 'ja_JP',\n    ko: 'ko_KR',\n    ms: 'ms_MY',\n    nl: 'nl_NL',\n    no: 'no_NO',\n    pl: 'pl_PL',\n    pt: 'pt_BR',\n    ro: 'ro_RO',\n    ru: 'ru_RU',\n    sv: 'sv_SE',\n    th: 'th_TH',\n    tl: 'tl_PH',\n    tr: 'tr_TR',\n    uk: 'uk_UA',\n    zh: 'zh_CN',\n    zh: 'zh_TW',\n  };\n\n  /* scraped via script from https://www.linkedin.com/mypreferences/d/language-for-translation\n     let langs = {};\n     document\n        .querySelectorAll('input[name=\"secondaryLanguageSetting\"]')\n        .forEach((x) => {\n          const locale = x.id.replace(/^secondary_language_(.+?)(_.*)?$/, '$1');\n          const value = x.value;\n          langs[locale] = value;\n        });\n     console.log(JSON.stringify(langs));\n     */\n\n  static LANG_TO_SECONDARY_NAME = {\n    af: 'Afrikaans',\n    in: 'Bahasa Indonesia',\n    ms: 'Bahasa Malaysia',\n    bs: 'Bosanski',\n    ca: 'CatalÃ ',\n    cs: 'ÄŒeÅ¡tina',\n    cy: 'Cymraeg',\n    da: 'Dansk',\n    de: 'Deutsch',\n    et: 'Eesti keel',\n    en: 'English',\n    es: 'EspaÃ±ol',\n    fr: 'FranÃ§ais',\n    hr: 'Hrvatski',\n    it: 'Italiano',\n    sw: 'Kiswahili',\n    lv: 'LatvieÅ¡u valoda',\n    lt: 'LietuviÅ³ kalba',\n    hu: 'Magyar',\n    mt: 'Malti',\n    nl: 'Nederlands',\n    no: 'Norsk',\n    pl: 'Polski',\n    pt: 'PortuguÃªs',\n    ro: 'RomÃ¢nÄƒ',\n    sk: 'SlovenÄina',\n    sl: 'SlovenÅ¡Äina',\n    sr: 'CÑ€Ð¿ÑÐºÐ¸',\n    fi: 'Suomi',\n    sv: 'Svenska',\n    tl: 'Tagalog',\n    vi: 'Tiáº¿ng viá»‡t',\n    tr: 'TÃ¼rkÃ§e',\n    zh: 'æ­£é«”ä¸­æ–‡',\n    ja: 'æ—¥æœ¬èªž',\n    ko: 'í•œêµ­ì–´',\n    ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',\n    fa: 'ÙØ§Ø±Ø³Ù‰',\n    he: '×¢×‘×¨×™×ª',\n    ur: 'Ø§Ø±Ø¯Ùˆ',\n    hi: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',\n    th: 'à¸ à¸²à¸©à¸²à¹„à¸—à¸¢',\n    el: 'ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬',\n    bg: 'Ð±ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸',\n    ru: 'Ð ÑƒÑÑÐºÐ¸Ð¹',\n    uk: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°',\n  };\n\n  // Reverse SECONDARY_NAME_TO_LANG\n  static SECONDARY_NAME_TO_LANG = Object.entries(\n    linkedinHandler.LANG_TO_SECONDARY_NAME\n  ).reduce((acc, [key, value]) => ((acc[value] = key), acc), {});\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'LinkedIn Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async _targetLanguagesConfig() {\n    const $self = this;\n    return fetch(\n      'https://www.linkedin.com/psettings/select-language-for-translation?li_theme=light&openInMobileMode=true'\n    )\n      .then((response) => response.text())\n      .then((html) => $self._parseNotranslateLanguages(html));\n  }\n\n  _parseNotranslateLanguages(html) {\n    const result = {};\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n\n    const uiLanguage = doc.documentElement.lang\n      .replace(/-.*/, '')\n      .toLowerCase();\n\n    const languageTranslateTo = doc\n      .querySelector('input[name=\"primaryLanguageSetting\"]:checked')\n      .value.replace(/_.*/, '');\n    if (!languageTranslateTo) {\n      throw new Error(\n        'Failed to match languageTranslateTo language on LinkedIn prefereces page'\n      );\n    }\n\n    let dontTranslateLanguagesElements = [];\n    doc.querySelectorAll('span.label-secondary-langauge-item').forEach((x) => {\n      const text = x.innerText.replace(/\\s*\\(.*/, '');\n      dontTranslateLanguagesElements.push(text);\n    });\n\n    const oldCfg = {};\n    result['oldConfig'] = oldCfg;\n\n    oldCfg['uiLanguage'] = uiLanguage;\n    oldCfg['languageTranslateTo'] = languageTranslateTo;\n    oldCfg['dontTranslateLanguagesElements'] = dontTranslateLanguagesElements;\n\n    /*\n      {\n        \"uiLanguage\": \"uk\",\n        \"languageTranslateTo\": \"uk\",\n        \"dontTranslateLanguagesElements\": [\n            \"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°\",\n            \"English\"\n        ]\n      }\n    */\n\n    const newConfig = {};\n    result['newConfig'] = newConfig;\n\n    if (oldCfg['uiLanguage'] !== this.moreLanguages[0])\n      newConfig['uiLanguage'] = this.moreLanguages[0];\n    if (oldCfg['languageTranslateTo'] !== this.moreLanguages[0])\n      newConfig['languageTranslateTo'] = this.moreLanguages[0];\n\n    const moreLanguages = this.moreLanguages;\n    const lessLanguages = this.lessLanguages;\n    const newDontTranslateLanguagesElements =\n      dontTranslateLanguagesElements.filter(\n        (value) =>\n          !lessLanguages.includes(linkedinHandler.SECONDARY_NAME_TO_LANG[value])\n      );\n    this.moreLanguages.forEach((lang) => {\n      const langMapped = linkedinHandler.LANG_TO_SECONDARY_NAME[lang];\n      if (!newDontTranslateLanguagesElements.includes(langMapped)) {\n        newDontTranslateLanguagesElements.push(langMapped);\n      }\n    });\n\n    if (\n      JSON.stringify(dontTranslateLanguagesElements) !==\n      JSON.stringify(newDontTranslateLanguagesElements)\n    ) {\n      newConfig['dontTranslateLanguagesElements'] =\n        newDontTranslateLanguagesElements;\n    }\n\n    if (Object.keys(newConfig).length === 0) {\n      return null;\n    }\n\n    return result;\n  }\n\n  async _changeTranslateLanguageTo(config) {\n    if (!config['newConfig']['languageTranslateTo']) return;\n\n    const CSRF = await this._getCSRF();\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      body: `locale=${encodeURIComponent(\n        config.newConfig.languageTranslateTo\n      )}&csrfToken=${encodeURIComponent(CSRF)}`,\n    };\n\n    // Translate to https://www.linkedin.com/psettings/select-language-for-translation\n    // POST\n    // locale=de_DE&csrfToken=ajax%3A1275605328103358844\n\n    return contextFetch(\n      'https://www.linkedin.com/psettings/select-language-for-translation',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  async _changeUILanguageTo(config) {\n    if (!config['newConfig']['uiLanguage']) return;\n    const locale = linkedinHandler.LANG_TO_LOCALE[config.newConfig.uiLanguage];\n\n    const CSRF = await this._getCSRF();\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      body: `locale=${encodeURIComponent(\n        locale\n      )}&csrfToken=${encodeURIComponent(CSRF)}`,\n    };\n\n    return contextFetch(\n      'https://www.linkedin.com/psettings/select-language',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  async _changeNoTranslateLanguagesTo(config) {\n    const languages = config['newConfig']['dontTranslateLanguagesElements'];\n    if (!languages) return;\n\n    const CSRF = await this._getCSRF();\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      body: `locales=${encodeURIComponent(\n        languages.join(',')\n      )}&csrfToken=${encodeURIComponent(CSRF)}`,\n    };\n\n    // Translate to\n    // POST\n    // locales=%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0%2CEnglish&csrfToken=ajax%3A1275605328103358844\n    // locales: Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°,English\n\n    return contextFetch(\n      'https://www.linkedin.com/psettings/select-language-for-translation/secondary-languages',\n      requestOptions\n    ).then((response) => {\n      return true;\n    });\n  }\n\n  async _changeLanguageTo(config) {\n    return this._changeUILanguageTo(config)\n      .then(() => this._changeTranslateLanguageTo(config))\n      .then(() => this._changeNoTranslateLanguagesTo(config))\n      .catch((e) => {\n        console.log('Error http execution', e);\n        return e;\n      });\n  }\n\n  async _getCSRF() {\n    return fetch(\n      'https://www.linkedin.com/psettings/select-language-for-translation?li_theme=light&openInMobileMode=true'\n    )\n      .then((response) => response.text())\n      .then((html) => this._parseCSRF(html));\n  }\n\n  _parseCSRF(html) {\n    const CSRF_matched = html.match(/\"csrfToken\":\"(.*?)\"/);\n\n    if (!CSRF_matched || !CSRF_matched[1]) {\n      throw new Error('Failed to match CSRF LinkedIn prefereces page');\n    }\n    return CSRF_matched[1];\n  }\n}\n","import browser from 'webextension-polyfill';\n\n// This set of functions is to be called from a content process\n// with the goal to prepare HTTP requests,\n// send to the background process for execution,\n// process the response and return relevant results\n\nexport async function getGoogleUILangugages(cachedHtml) {\n  // Use the cached html when provided\n  const fetchDom = cachedHtml\n    ? Promise.resolve(cachedHtml)\n    : browser.runtime.sendMessage({\n        type: 'content',\n        subtype: 'MsgGetGoogleAccountLanguages',\n      });\n\n  return fetchDom.then((html) => {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    // Returns \"Preferred languages\" in format ['uk', 'en-NL'], sorted by priority\n    const googleLangs = [...doc.querySelectorAll('.GqRghe .mMsbvc > label')]\n      .map((node) => node.getAttribute('lang'))\n      .filter((lang) => lang);\n\n    // Now check if Google Profile languages match\n    // TODO: fetch a list of languages assumed by Google\n    const match = html.match(\n      /https:\\\\\\/\\\\\\/www\\.google\\.com\\\\\\/settings','(.*?)'/\n    );\n    if (!match || !match[1]) {\n      throw new Error('No \"at\" value found on Google Account page');\n    }\n    const settingsAt = match[1];\n\n    return Promise.resolve({ googleLangs, settingsAt });\n  });\n}\n\n// Takes a data structure returned by getGoogleUILangugages\nexport async function setGoogleUILangugages(settings) {\n  if (!settings || !settings.settingsAt || !settings.googleLangs) {\n    return;\n  }\n\n  // calls setGoogleUILangugagesRequest(body) in the background process\n  return browser.runtime.sendMessage({\n    type: 'content',\n    subtype: 'MsgSetGoogleAccountLanguages',\n    languages: settings.googleLangs,\n  });\n}\n\n// setGoogleUILangugagesRequest() is meant to be invoked from the background process\n\nexport async function setGoogleUILangugagesRequest(newGoogleLangs) {\n  if (!newGoogleLangs || !newGoogleLangs.length) {\n    throw new Error(\n      'setGoogleUILangugagesRequest error: No languages provided',\n      newGoogleLangs\n    );\n  }\n\n  return getGoogleUILangugagesRequest()\n    .then((html) => {\n      const match = html.match(\n        /https:\\\\\\/\\\\\\/www\\.google\\.com\\\\\\/settings','(.*?)'/\n      );\n      if (!match) {\n        throw new Error('No \"at\" value found in DOM');\n      }\n      return match[1];\n    })\n    .then((settingsAt) => {\n      // Example payload: f.req=[[\"uk\", \"en-NL\"]]&at=AGM9kOYuAHoYlyx1LLunsOPC-EVj:16J1479455245&\n      const setAccountLangsBody = _formEncode({\n        'f.req': JSON.stringify([newGoogleLangs]),\n        at: settingsAt,\n      });\n\n      const disableAutodetectLangsBody = _formEncode({\n        'f.req': JSON.stringify([[['NeP2w', '[2]', null, 'generic']]]),\n        at: settingsAt,\n      });\n\n      return Promise.all([\n        // Updates google account languages according to the config\n        fetch('https://myaccount.google.com/_/language_update', {\n          headers: {\n            'content-type': 'application/x-www-form-urlencoded;charset=UTF-8',\n          },\n          body: setAccountLangsBody,\n          credentials: 'include',\n          method: 'POST',\n        }),\n\n        // Disables auto-suggestions of languages by Google\n        // as it's known to suggest undesired languages without confirming with the user\n        fetch(\n          'https://myaccount.google.com/_/AccountSettingsUi/data/batchexecute',\n          {\n            headers: {\n              'content-type': 'application/x-www-form-urlencoded;charset=UTF-8',\n            },\n            body: disableAutodetectLangsBody,\n            credentials: 'include',\n            method: 'POST',\n          }\n        ),\n      ]).then((responses) => {\n        // Only consider the response to 'update languages' request\n        if (responses[0].status == 200) {\n          return Promise.resolve(responses[0].status);\n        } else {\n          return Promise.reject({\n            status: responses[0].status,\n            reason: responses[0].text,\n          });\n        }\n      });\n    });\n}\n\nexport async function getGoogleUILangugagesRequest() {\n  return fetch('https://myaccount.google.com/language', {\n    credentials: 'include',\n  }).then((r) => r.text());\n}\n\nfunction _formEncode(data) {\n  var formBody = [];\n  for (const property in data) {\n    const encodedKey = encodeURIComponent(property);\n    const encodedValue = encodeURIComponent(data[property]);\n    formBody.push(encodedKey + '=' + encodedValue);\n  }\n  return formBody.join('&');\n}\n","import defaultHandler from './default';\nimport { reportError } from '../util';\nimport {\n  getGoogleUILangugages,\n  setGoogleUILangugages,\n} from './shared/google-ui-languages';\n\nexport default class youtubeHandler extends defaultHandler {\n  handlerName = 'youtube';\n\n  SUPPORTED_LANGUAGES() {\n    return ['uk'];\n  }\n\n  static HTML_LANG_MAP = {\n    uk: 'uk-UA',\n  };\n\n  static COOKIE_LANG_MAP = {\n    uk: 'uk',\n  };\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'Ð†Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Youtube Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async _targetLanguagesConfig() {\n    const $self = this;\n\n    return Promise.all([\n      super._targetLanguagesConfig(),\n      getGoogleUILangugages(),\n    ]).then(([YTLangs, GoogleUILangsConfig]) => {\n      const YTLang = YTLangs ? YTLangs[0] : null;\n\n      if (GoogleUILangsConfig) {\n        GoogleUILangsConfig.googleLangs = $self._generateNewLanguagesConfig(\n          GoogleUILangsConfig.googleLangs\n        );\n      }\n\n      if (!YTLangs && !GoogleUILangsConfig.googleLangs) {\n        return Promise.reject($this.NOOP);\n      }\n\n      return { YTLang, GoogleUILangsConfig };\n    });\n  }\n\n  async _changeLanguageTo({ YTLang, GoogleUILangsConfig }) {\n    // YT has an odd way of managing UI language preferences by storing those in cookie in PERF cookie, e.g.:\n    // PREF=volume=100&tz=Europe.Amsterdam&al=uk%2Ben-GB%2Ben&f4=4000000&f5=20030&f6=40000000&hl=af&gl=UA&f7=100\n    // hl and al define the UI, both paramters can be absent\n    let prefValue = document.cookie\n      .split('; ')\n      .find((row) => row.startsWith('PREF='));\n\n    if (prefValue && prefValue.match(/hl=/)) {\n      prefValue = prefValue.replace(/hl=.*?(\\&|$)/, 'hl=' + YTLang + '$1');\n    } else {\n      prefValue += '&hl=' + YTLang;\n    }\n\n    if (prefValue.match(/al=/)) {\n      prefValue = prefValue.replace(/al=.*?(\\&|$)/, 'al=' + YTLang + '$1');\n    } else {\n      prefValue += '&al=' + YTLang;\n    }\n\n    const date = new Date();\n    date.setTime(date.getTime() + 365 * 24 * 60 * 60 * 1000);\n    const expires = '; expires=' + date.toUTCString();\n    document.cookie =\n      'PREF=' + prefValue + expires + '; domain=.youtube.com; path=/';\n\n    return setGoogleUILangugages(GoogleUILangsConfig);\n  }\n}\n","import defaultHandler from './default';\nimport { reportError } from '../util';\nimport {\n  getGoogleUILangugages,\n  setGoogleUILangugages,\n} from './shared/google-ui-languages';\n\nexport default class googleMyaccountHandler extends defaultHandler {\n  handlerName = 'google-myaccount';\n\n  preferencesUrl = 'https://myaccount.google.com/language';\n  SUPPORTED_LANGUAGES() {\n    return ['uk', 'en'];\n  }\n\n  HTML_LANG_MAP = {\n    uk: 'uk',\n    en: 'en-GB',\n  };\n\n  COOKIE_LANG_MAP = {\n    uk: 'uk',\n  };\n\n  _tweakLanguagesCTA(languageConfig) {\n    return 'Ð†Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¸ Google Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑŽÑ‚ÑŒ Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ. ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸?';\n  }\n\n  async _targetLanguagesConfig() {\n    const $self = this;\n    const html =\n      $self.location.href === $self.preferencesUrl\n        ? $self.document.documentElement.innerHTML\n        : null;\n\n    return getGoogleUILangugages(html)\n      .then((GoogleUILangsConfig) => {\n        if (!GoogleUILangsConfig || !GoogleUILangsConfig.googleLangs) {\n          reportError('Failed to parse Google Account preferences page', e);\n          return;\n        }\n        GoogleUILangsConfig.googleLangs = $self._generateNewLanguagesConfig(\n          GoogleUILangsConfig.googleLangs\n        );\n        if (!GoogleUILangsConfig.googleLangs) {\n          return Promise.reject($self.NOOP);\n        }\n        return GoogleUILangsConfig.googleLangs;\n      })\n      .catch((e) => {\n        if (e === $self.NOOP) return e;\n\n        reportError('Failed to parse Google Account preferences page', e);\n        return Promise.reject($self.NOOP);\n      });\n  }\n\n  async _changeLanguageTo(GoogleUILangsConfig) {\n    return setGoogleUILangugages(GoogleUILangsConfig);\n  }\n}\n","import defaultHandler from './content/default';\nimport facebookHandler from './content/facebook';\nimport googleSearchHandler from './content/google-search';\nimport wikipediaHandler from './content/wikipedia';\nimport linkedinHandler from './content/linkedin';\nimport youtubeHandler from './content/youtube';\nimport googleMyaccountHandler from './content/google-myaccount';\n\nexport function dispatch(location, document, moreLanguages, lessLanguages) {\n  if (location.hostname.match(/\\.facebook.com$/i)) {\n    return new facebookHandler(...arguments);\n  } else if (location.hostname.match(/myaccount\\.google\\.com$/i)) {\n    return new googleMyaccountHandler(...arguments);\n  } else if (\n    location.hostname.match(\n      /(^|\\.)google\\.(\\w\\w|co\\.(\\w\\w)|com|com\\.(\\w\\w)|\\w\\w)$/i\n    )\n  ) {\n    return new googleSearchHandler(...arguments);\n  } else if (location.hostname.match(/\\.wikipedia.org$/i)) {\n    return new wikipediaHandler(...arguments);\n  } else if (location.hostname.match(/www\\.linkedin.com$/i)) {\n    return new linkedinHandler(...arguments);\n  } else if (location.hostname.match(/www\\.youtube\\.com$/i)) {\n    return new youtubeHandler(...arguments);\n  } else {\n    //return new defaultHandler(...arguments);\n  }\n}\n","import '../img/icon-128.png';\nimport '../img/icon-64.png';\nimport '../img/icon-32.png';\n\nimport { storageGetSync, reportError, FEATURES } from './util';\nimport { dispatch } from './routing';\n\nstorageGetSync('userSettings').then((settings) => {\n  if (!FEATURES.CONTENT) return;\n\n  let userSettings = settings.userSettings || {};\n  let moreLanguages = userSettings.moreLanguages || [];\n  let lessLanguages = userSettings.lessLanguages || [];\n\n  if (!FEATURES.CONTENT) {\n    console.log('CONTENT is disabled. Not processing the page');\n    return;\n  }\n\n  if (moreLanguages.length === 0) {\n    console.log('moreLanguages not set. Not processing the page');\n    return;\n  }\n\n  const handler = dispatch(\n    window.location,\n    document,\n    moreLanguages,\n    lessLanguages\n  );\n\n  if (!handler.isEnabled) return;\n\n  try {\n    console.log(`Dispatched to content handler ${handler.handlerName}`);\n    handler\n      .needToTweakLanguages()\n      .then((config) => handler.tweakLanguages())\n      .catch((e) => {\n        if (e === handler.NOOP) {\n          console.log(\n            `tweakLanguages flow if ${handler.handlerName} returned 'nothing to do'`,\n            e\n          );\n          return;\n        }\n        reportError(`Error in ${handler.handlerName} content flow`, e);\n      });\n  } catch (e) {\n    reportError(`content.js: fatal error in ${handler.handlerName} flow`, e);\n  }\n});\n"],"names":[],"sourceRoot":""}